<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

        <title>Causal Inference: Introduction</title>

        <link rel="stylesheet" href="dist/reset.css">
        <link rel="stylesheet" href="dist/reveal.css">
        <link rel="stylesheet" href="dist/theme/white.css" id="theme">

        <!-- Theme used for syntax highlighted code -->
        <link rel="stylesheet" href="plugin/highlight/monokai.css" id="highlight-theme">
    </head>
    <body>
        <div class="reveal">
            <div class="slides">
                <section>
                    <h1>Causal Inference: Introduction</h1>
                    <p>
                        &copy; 2020 Anton Lebedevich
                    </p>
                </section>
                <section>
                    <h2>Anton Lebedevich</h2>
                    <ul>
                        <li>data science engineer</li>
                        <li>background in backend performance optimization</li>
                        <li>loves time series and anomalies</li>
                        <li>worked on spam detection, marketing campaign optimization, demand forecasting</li>
                        <li>blogs at <a href="http://mabrek.github.io">mabrek.github.io</a>
                    </ul>
                </section>
                <section>
                    <h2>Story: Dog's Tail</h2>
                    <p>ML problem: make a dog friendly (TODO happy dog with tail image)</p>
                    <p>you have a dataset of dogs' features: color, breed, size, wagging its tail, friendliness</p>
                    <p>regression shows that tail wagging is the most important feature to predict friendliness</p>
                    <p>you decide to manually wag this dog's tail (TODO "no you sit! - okay" meme image)</p>
                    <p>YOU DIED</p>
                </section>
                <section>
                    <h2>Story: Sales before Weekend</h2>
                    <p>you have historical sales of a product per day<br/>
                    TODO weekly pattern graph (medim Mon, good Tue-Wed, medium Thu, small Fri, very small Sat-Sun<br/>
                    need to optimize replenishment based on predicted demand<br/>
                    model predicts low sales on Fri-Sun despite having some items in stock<br/>
                    you decide to send one truck on Monday evening<br/>
                    NO PROFIT, Monday sales dropped<br/>
                    the product expires in one week, so ppl don't want to stockpile soon to be expired product for weekend<br/>
                    it was better to send two trucks on Mon and Thu morning<br/>
                </section>
                <section>
                    <h2>Causation</h2>
                    <p>there is something that you can't figure out from historical data alone</p>
                    <p>you need to have domain knowledge or run experiments</p>
                    <p>kids learn that hard way (have you tried to wag dog's tail?)</p>
                </section>
                <section>
                    <h2>Correlation does not imply causation</h2>
                    https://en.wikipedia.org/wiki/Correlation_does_not_imply_causation
                    <blockquote>inability to legitimately deduce a cause-and-effect relationship between two variables solely on the basis of an observed association or correlation between them</blockquote>
                    <p>supervised ml models learn association (correlation) not causation (effect of intervention)</p>
                    TODO "but why" meme image
                </section>
                <section>
                    <h2>Causation vs Association</h2>
                    image from What If book
                </section>
                <section>
                    <h2>AB-test vs. Observational Studies</h2>
                    Drake parrot meme with two versions, initially it prefers AB-tests, but then switches to Observational Studies
                </section>
                <section>
                    <h2>Observational Studies</h2>
                    <p>use only if you can't run randomized experiment</p>
                    <ul>
                        <li>you have to make assumptions</li>
                        <li>requires exchangeability, positivity, consistency</li>
                        <li>breaks under unmeasured confounding</li>
                    </ul>
                </section>
                <section>
                    <h2>Exchangeability</h2>
                    <blockquote>The conditional probability of receiving every value of treatment, though not decided by the investigators, depends only on measured covariates L</blockquote>
                    TODO formula
                </section>
                <section>
                    <h2>Positivity</h2>
                    <blockquote>The probability of receiving every value of treatment conditional on L is positive.</blockquote>
                </section>
                <section>
                    <h2>Consistency</h2>
                    <blockquote>The values of treatment under comparison correspond to well-defined interventions that, in turn, correspond to the versions of treatment in the data </blockquote>
                    story: being fit by genes and exercising vs. being obese and forced to diet and exercise
                </section>
                <section>
                    <h2>Causal Diagrams</h2>
                    <p>TODO image structure of confounding, with and without conditioning
                    <p>relation to PGM
                </section>
                <section>
                    <h2>Complicated Bias (M-shaped)</h2>
                    <p>TODO physical activity and cervical cancer image from What If book
                </section>
                <section>
                    <h2>Selection Bias</h2>
                    TODO image
                </section>
                <section>
                    <h2>Measurement Bias</h2>
                    TODO image
                </section>
                <section>
                    <h2>Methods</h2>
                    <ul>
                        <li>stratification</li>
                        <li>propensity scores (many ways to use)</li>
                        <li>outcome regression (is my profession)</li>
                        <li>double-robust methods</li>
                        <li>g-estimation</li>
                        <li>&hellip; to be continued, active research</li>
                    </ul>
                </section>
                <section>
                    <h2>G-estimation</h2>
                    stratification, matching, conditioning doesn't work for complex structure from "An introduction to g methods"
                </section>
                <section>
                    <h2>Moar Layers and Moar Data Myth</h2>
                    <ul>
                        <li>adding features could add more bias (from variable selection What If Book)</li>
                        <li>more data doesn't mean that extra data is unbiased</li>
                        <li>ml model could throw away your treatment variable</li>
                        <li>confounders are correlated with causes, incorrect feature importance</li>
                        <li>regression coefficients are unstable for correlated features</li>
                        <li>still can't find causation, only association</li>
                    </ul>
                </section>
                <section>
                    <h2>Be careful</h2>
                    observational studies have shown to make more mistakes when someone tries to reproduce
                </section>
                <section>
                    <h2>Links</h2>
                    What If book https://www.hsph.harvard.edu/miguel-hernan/causal-inference-book/

                    An introduction to g methods https://www.ncbi.nlm.nih.gov/pmc/articles/PMC6074945/

                    Judea Pearl, Causal inference in statistics: An overview http://ftp.cs.ucla.edu/pub/stat_ser/r350.pdf

                    The Book of Why: The New Science of Cause - Judea Pearl

                    https://causalinference.gitlab.io/kdd-tutorial/

                    Causal Inference Seminar - Peter Tennant-SbrX3YEMj_0.mp4

                    Causal Inference in Online Systems-7ebafe1f-8af3-46a2-8308-a909014772c0.mp4
                </section>
                <section>
                    <h2>Q&amp;A</h2>
                    <p>
                    <p>Anton Lebedevich</p>
                    <p>mabrek@gmail.com</p>
                    <p><img src="img/Twitter_Logo_Blue.svg" height="25" width="25" style="margin: 0px 0px;"/><a href="https://twitter.com/widdoc">@widdoc</a></p>
                    <p><a href="https://mabrek.github.io/causal-inference-2020/">mabrek.github.io/causal-inference-2020/</a></p>
                </section>
            </div>
        </div>

        <script src="dist/reveal.js"></script>
        <script src="plugin/notes/notes.js"></script>
        <script src="plugin/markdown/markdown.js"></script>
        <script src="plugin/highlight/highlight.js"></script>
        <script>
            // More info about initialization & config:
            // - https://revealjs.com/initialization/
            // - https://revealjs.com/config/
            Reveal.initialize({
              hash: true,
              controls: false,
              progress: false,
              history: true,
              center: true,
              slideNumber: 'c/t',
              transition: 'none',
              width: 1920,
              height: 1080,
              // Learn about plugins: https://revealjs.com/plugins/
              plugins: [ RevealHighlight, RevealNotes ]
            });
        </script>
    </body>
</html>
